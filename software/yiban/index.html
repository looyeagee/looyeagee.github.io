<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="author" content="LooyeaGee"><title>[å¼€æº]æ˜“ç­å¥åº·çŠ¶æ€è‡ªåŠ¨æ‰“å¡ | äº¦ä¹‹æ—¥è®°</title><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/style.css?20200712"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><script src="https://cdn.jsdelivr.net/npm/jquery@3.1.1/dist/jquery.min.js"></script><script src="/js/script.js"></script><script src="/js/tocbot.min.js"></script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js",(e=document.getElementsByTagName("script")[0]).parentNode.insertBefore(t,e)}()</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script>$(function(){$("img").each(function(){var t;console.log($(this).data("nobox")),$(this).data("nobox")||(t=document.createElement("a"),$(t).attr("data-fancybox","gallery"),$(t).attr("href",$(this).attr("src")),$(t).attr("data-caption",$(this).attr("alt")),$(this).wrap(t),void 0!==(t=$(this).attr("alt"))&&null!=t&&""!=t&&$(this).after('<div style="text-align:center;text-decoration:none;color:#949292;">'+$(this).attr("alt")+"</div>"))})})</script><style></style><meta name="generator" content="Hexo 4.2.1"></head><body><div class="wrapper"><header><nav class="navbar"><div class="container"><div class="navbar-header header-logo"><a href="/">äº¦ä¹‹æ—¥è®°</a></div><div class="menu navbar-right"><a class="menu-item" href="/archives/">æ–‡ç« </a> <a class="menu-item" href="/tag/">æ ‡ç­¾</a> <a class="menu-item" href="/categories/%E7%AC%94%E8%AE%B0/">ç¬”è®°</a> <a class="menu-item" href="/categories/%E6%8A%98%E8%85%BE/">æŠ˜è…¾</a> <a class="menu-item" href="/categories/%E7%A2%8E%E8%AF%AD/">ç¢è¯­</a> <a class="menu-item" href="/categories/%E5%8E%9F%E5%88%9B%E8%BD%AF%E4%BB%B6/">åŸåˆ›è½¯ä»¶</a> <a class="menu-item" href="/about/">å…³äº</a> <a class="menu-item" href="/friendlylink/">å‹é“¾</a> <a class="menu-item" href="https://snowbao.looyeagee.cn/" target="_blank" rel="noopener">é›ªå®Webç‰ˆ</a> <a class="menu-item" href="https://photo.looyeagee.cn/" target="_blank" rel="noopener">ç›¸å†Œ</a></div></div></nav><nav class="navbar-mobile" id="nav-mobile"><div class="container"><div class="navbar-header"><div><a href="/">äº¦ä¹‹æ—¥è®°</a></div><div class="menu-toggle" onclick="mobileBtn()">&#9776; èœå•</div></div><div class="menu" id="mobile-menu"><a class="menu-item" href="/archives/">æ–‡ç« </a> <a class="menu-item" href="/tag/">æ ‡ç­¾</a> <a class="menu-item" href="/categories/%E7%AC%94%E8%AE%B0/">ç¬”è®°</a> <a class="menu-item" href="/categories/%E6%8A%98%E8%85%BE/">æŠ˜è…¾</a> <a class="menu-item" href="/categories/%E7%A2%8E%E8%AF%AD/">ç¢è¯­</a> <a class="menu-item" href="/categories/%E5%8E%9F%E5%88%9B%E8%BD%AF%E4%BB%B6/">åŸåˆ›è½¯ä»¶</a> <a class="menu-item" href="/about/">å…³äº</a> <a class="menu-item" href="/friendlylink/">å‹é“¾</a> <a class="menu-item" href="https://snowbao.looyeagee.cn/" target="_blank" rel="noopener">é›ªå®Webç‰ˆ</a> <a class="menu-item" href="https://photo.looyeagee.cn/" target="_blank" rel="noopener">ç›¸å†Œ</a></div></div></nav></header><script>var mobileBtn=function(){var e=document.getElementsByClassName("menu-toggle")[0],t=document.getElementById("mobile-menu");e.classList.contains("active")?(e.classList.remove("active"),t.classList.remove("active")):(e.classList.add("active"),t.classList.add("active"))}</script><div class="main"><div class="container"><div class="post-toc"><div class="tocbot-list"></div><div class="tocbot-list-menu"><a class="tocbot-toc-expand" onclick="expand_toc()">å±•å¼€ç›®å½•</a> <a onclick="go_top()">å›åˆ°é¡¶éƒ¨</a> <a onclick="go_bottom()">è½¬å»åº•éƒ¨</a></div></div><script>function expand_toc(){var t=document.querySelector(".tocbot-toc-expand");tocbot.init({tocSelector:".tocbot-list",contentSelector:".post-content",headingSelector:"h1, h2, h3, h4, h5",collapseDepth:6,orderedList:!1,scrollSmooth:!0}),t.setAttribute("onclick","collapse_toc()"),t.innerHTML="æ”¶èµ·ç›®å½•"}function collapse_toc(){var t=document.querySelector(".tocbot-toc-expand");tocbot.init({tocSelector:".tocbot-list",contentSelector:".post-content",headingSelector:"h1, h2, h3, h4, h5",collapseDepth:1,orderedList:!1,scrollSmooth:!0}),t.setAttribute("onclick","expand_toc()"),t.innerHTML="å±•å¼€ç›®å½•"}function go_top(){window.scrollTo(0,0)}function go_bottom(){window.scrollTo(0,document.body.scrollHeight)}document.ready(function(){tocbot.init({tocSelector:".tocbot-list",contentSelector:".post-content",headingSelector:"h1, h2, h3, h4, h5",collapseDepth:1,orderedList:!1,scrollSmooth:!0})})</script><article class="post-wrap"><header class="post-header"><h1 class="post-title">[å¼€æº]æ˜“ç­å¥åº·çŠ¶æ€è‡ªåŠ¨æ‰“å¡</h1><div class="post-meta">ä½œè€…: <a itemprop="author" rel="author" href="/">LooyeaGee</a> <span class="post-time">æ—¥æœŸ: <a href="#">2020-02-20&nbsp;&nbsp;04:09</a> </span><span class="post-category">åˆ†ç±»: <a href="/categories/%E5%8E%9F%E5%88%9B%E8%BD%AF%E4%BB%B6/">åŸåˆ›è½¯ä»¶</a> </span><span class="post-category">è®¿é—®é‡:<span id="article_pv">åŠ è½½ä¸­...</span></span></div></header><div class="post-content"><blockquote><p>æ³¨1ï¼šæœ¬ç¨‹åºåªå¯¹é•¿æ²™ç†å·¥å¤§å­¦åšäº†é€‚é…ï¼Œå…¶å®ƒå¤§å­¦éœ€è¦è‡ªè¡ŒæŠ“åŒ…æ”¹ä»£ç å“¦~</p></blockquote><blockquote><p>æ³¨2ï¼šå¯¹äºé¦–æ¬¡æ‰“å¡åå‡ å¤©åæ˜“ç­å¯¹æ ¡æœ¬åŒ–çš„æˆæƒå¯èƒ½ä¼šå¤±æ•ˆï¼Œè¿™æ¬¡é‡æ–°åŠ ä¸Šåˆ¤æ–­æˆæƒå¤±è´¥é‡æ–°æˆæƒçš„ä»£ç ã€‚å·²äº2020-04-11æµ‹è¯•æ— è¯¯ã€‚</p></blockquote><h1 id="ğŸ˜å‰æ²¿"><a href="#ğŸ˜å‰æ²¿" class="headerlink" title="ğŸ˜å‰æ²¿"></a>ğŸ˜å‰æ²¿</h1><p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/looyeagee/yiban_auto_submit" target="_blank" rel="noopener">https://github.com/looyeagee/yiban_auto_submit</a></p><p>å­¦æ ¡éœ€è¦æ¯å¤©æ‰“å¡ï¼Œè€Œå¥åº·çš„æˆ‘æ‰“å¡å†…å®¹æ¯å¤©ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚æ‰€ä»¥æˆ‘å°±æƒ³å®ç°ä¸€ä¸ªè‡ªåŠ¨æ‰“å¡çš„ç¨‹åºã€‚</p><h1 id="ğŸš€å‡†å¤‡å·¥å…·"><a href="#ğŸš€å‡†å¤‡å·¥å…·" class="headerlink" title="ğŸš€å‡†å¤‡å·¥å…·"></a>ğŸš€å‡†å¤‡å·¥å…·</h1><h2 id="HttpCanary-å®‰å“æ‰‹æœºæŠ“åŒ…å¤§å¸ˆ"><a href="#HttpCanary-å®‰å“æ‰‹æœºæŠ“åŒ…å¤§å¸ˆ" class="headerlink" title="HttpCanary - å®‰å“æ‰‹æœºæŠ“åŒ…å¤§å¸ˆ"></a>HttpCanary - å®‰å“æ‰‹æœºæŠ“åŒ…å¤§å¸ˆ</h2><p>HttpCanaryæ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„HTTP/HTTPS/HTTP2ç½‘ç»œåŒ…æŠ“å–å’Œåˆ†æå·¥å…·ï¼Œä½ å¯ä»¥æŠŠä»–çœ‹æˆæ˜¯ç§»åŠ¨ç«¯çš„Fiddleræˆ–è€…Charlesï¼Œä½†æ˜¯HttpCanaryä½¿ç”¨èµ·æ¥æ›´åŠ åœ°ç®€å•å®¹æ˜“ï¼Œå› ä¸ºå®ƒæ˜¯ä¸“é—¨ä¸ºç§»åŠ¨ç«¯è®¾è®¡çš„ï¼</p><h1 id="ğŸŒé‡è¦åŒ…æ–‡"><a href="#ğŸŒé‡è¦åŒ…æ–‡" class="headerlink" title="ğŸŒé‡è¦åŒ…æ–‡"></a>ğŸŒé‡è¦åŒ…æ–‡</h1><p>æˆ‘æ˜¯å®‰å“æ‰‹æœºï¼Œä½¿ç”¨çš„è½¯ä»¶æ˜¯<code>HttpCanary</code>ï¼Œéå¸¸å¥½ç”¨ï¼Œå¯ä»¥ä¹°ä¸ªé«˜çº§ç‰ˆæ”¯æŒä½œè€…ã€‚ç”±äºæˆ‘å®‰å“æ‰‹æœºå·²ç»Rootï¼Œç›´æ¥ä¿¡ä»»äº†å‡çš„æ ¹è¯ä¹¦ã€‚è‹¥æ˜¯éRootç”¨æˆ·ï¼Œè¯·ä½¿ç”¨<code>å¹³è¡Œç©ºé—´</code>å¤„ç†ï¼ˆæ ¹æ®è½¯ä»¶å¼•å¯¼å³å¯ï¼‰å¼€å¯æŠ“åŒ…åï¼Œä¾æ¬¡è¿›è¡Œ<code>ç™»å½•ç³»ç»Ÿ</code>ï¼Œ<code>æ˜“ç­æ ¡æœ¬åŒ–</code>ï¼Œ<code>æ¯æ—¥å¥åº·æ‰“å¡</code>,<code>é€‰æ‹©ä»Šæ—¥æ‰“å¡ä»»åŠ¡</code>,<code>å¡«å†™åé¦ˆ</code>,<code>æäº¤</code>æ“ä½œã€‚</p><h2 id="1ã€-é‡è¦-ç™»å½•åŒ…"><a href="#1ã€-é‡è¦-ç™»å½•åŒ…" class="headerlink" title="1ã€[é‡è¦]ç™»å½•åŒ…"></a>1ã€[é‡è¦]ç™»å½•åŒ…</h2><p>(å·²äº20201119æ›´æ–°)æ„Ÿè°¢Bç«™ç”¨æˆ·<a href="https://space.bilibili.com/45807603" target="_blank" rel="noopener">ç ´æŸçš„é˜ç¿…</a>æä¾›çš„å¥½ç”¨å¹¶ä¸”ç®€æ´çš„æ¥å£ã€‚</p><table><thead><tr><th align="center">ç±»åˆ«</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">è·¯å¾„</td><td align="left"><a href="https://mobile.yiban.cn/api/v3/passport/login" target="_blank" rel="noopener">https://mobile.yiban.cn/api/v3/passport/login</a></td></tr><tr><td align="center">æ–¹å¼</td><td align="left">GET</td></tr><tr><td align="center">URLå‚æ•°</td><td align="left"><code>mobile</code>ï¼šæ‰‹æœºå·</td></tr><tr><td align="center">URLå‚æ•°</td><td align="left"><code>password</code>ï¼šæ˜æ–‡å¯†ç </td></tr><tr><td align="center">URLå‚æ•°</td><td align="left"><code>imei</code>ï¼šè®¾å¤‡è¯†åˆ«å·ï¼Œå¯ä»¥ä¹±å¡«</td></tr></tbody></table><p>è‹¥ç™»å½•æˆåŠŸï¼Œè¿”å›çš„æ˜¯ä¸ªäººä¿¡æ¯å’Œ<strong>access_token</strong>ï¼ˆé‡è¦ï¼‰ã€‚</p><h2 id="2ã€é¦–é¡µä¿¡æ¯åŒ…ï¼ˆç¨‹åºå¯ä»¥ä¸è®¿é—®å†™æ­»iappå°±å¥½ï¼‰"><a href="#2ã€é¦–é¡µä¿¡æ¯åŒ…ï¼ˆç¨‹åºå¯ä»¥ä¸è®¿é—®å†™æ­»iappå°±å¥½ï¼‰" class="headerlink" title="2ã€é¦–é¡µä¿¡æ¯åŒ…ï¼ˆç¨‹åºå¯ä»¥ä¸è®¿é—®å†™æ­»iappå°±å¥½ï¼‰"></a>2ã€é¦–é¡µä¿¡æ¯åŒ…ï¼ˆç¨‹åºå¯ä»¥ä¸è®¿é—®å†™æ­»iappå°±å¥½ï¼‰</h2><table><thead><tr><th align="center">ç±»åˆ«</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">è·¯å¾„</td><td align="left"><a href="https://mobile.yiban.cn/api/v3/home" target="_blank" rel="noopener">https://mobile.yiban.cn/api/v3/home</a></td></tr><tr><td align="center">æ–¹å¼</td><td align="left">GET</td></tr><tr><td align="center">URLå‚æ•°</td><td align="left"><code>access_token</code>ï¼šç™»å½•åŒ…ä¸‹å‘çš„access_token</td></tr></tbody></table><p>åœ¨è¿”å›çš„dataçš„hotAppsé‡Œæœ‰ä¸ªè¿™æ ·çš„ä¿¡æ¯è®°å½•ç€æ‰“å¡å…¥å£çš„åœ°å€</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"æ˜“ç­æ ¡æœ¬åŒ–"</span>,</span><br><span class="line">    <span class="attr">"icon"</span>: <span class="string">"http://yfs01.fs.yiban.cn/web/1BQ48Z"</span>,</span><br><span class="line">    <span class="attr">"url"</span>: <span class="string">"http://f.yiban.cn/iapp7463?access_token=å‡è£…æ‰“ç token&amp;v_time=158509617310884"</span>,</span><br><span class="line">    <span class="attr">"hyaline"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"source"</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">"app_id"</span>: <span class="number">80440</span>,</span><br><span class="line">    <span class="attr">"app_type"</span>: <span class="number">4</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3ã€-é‡è¦-äºŒæ¬¡è¯·æ±‚ç è·å–åŒ…"><a href="#3ã€-é‡è¦-äºŒæ¬¡è¯·æ±‚ç è·å–åŒ…" class="headerlink" title="3ã€[é‡è¦]äºŒæ¬¡è¯·æ±‚ç è·å–åŒ…"></a>3ã€[é‡è¦]äºŒæ¬¡è¯·æ±‚ç è·å–åŒ…</h2><p>ä¸Šé¢çš„åŒ…çš„urlæ•°æ®æ¯”è¾ƒé‡è¦ï¼Œè®¿é—®åä¼šé‡å®šå‘åˆ°<code>http://f.yiban.cn/iapp/index?act=iapp7463&amp;v={token}</code>ï¼Œå†è®¿é—®è¿™ä¸ªé‡å®šå‘ï¼Œåˆä¼šè¢«é‡å®šå‘åˆ°<code>https://c.uyiban.com/#/?verify_request={verify_request}&amp;yb_uid=13192120</code>ï¼Œå…¶ä¸­<strong>verify_request</strong>å¾ˆé‡è¦ï¼Œç”¨æ¥äºŒæ¬¡è®¤è¯ä½œè¯·æ±‚ç ã€‚</p><h2 id="4ã€-é‡è¦-äºŒæ¬¡è®¤è¯åŒ…"><a href="#4ã€-é‡è¦-äºŒæ¬¡è®¤è¯åŒ…" class="headerlink" title="4ã€[é‡è¦]äºŒæ¬¡è®¤è¯åŒ…"></a>4ã€[é‡è¦]äºŒæ¬¡è®¤è¯åŒ…</h2><table><thead><tr><th align="center">ç±»åˆ«</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">è·¯å¾„</td><td align="left"><a href="https://api.uyiban.com/base/c/auth/yiban" target="_blank" rel="noopener">https://api.uyiban.com/base/c/auth/yiban</a></td></tr><tr><td align="center">æ–¹å¼</td><td align="left">GET</td></tr><tr><td align="center">URLå‚æ•°</td><td align="left"><code>verifyRequest</code>ï¼šè®¤è¯è¯·æ±‚ç ï¼Œä¹Ÿå°±æ˜¯åˆšåˆšçš„<strong>verify_request</strong></td></tr><tr><td align="center">URLå‚æ•°</td><td align="left"><code>CSRF</code>:Cross-site request forgeryï¼Œé˜²è·¨ç«™è¯·æ±‚ä¼ªé€ çš„tokenã€‚æœ¬æ¥åº”è¯¥æ˜¯æœåŠ¡ç«¯ä¸‹å‘ï¼Œç»æ£€æµ‹ï¼Œè¿™é‡Œæ˜¯å®¢æˆ·ç«¯éšæœºç”Ÿæˆçš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥éšä¾¿å¡«ä¸œè¥¿ã€‚æœåŠ¡ç«¯ä¼šè®°ä½è¿™ä¸ªä¸œè¥¿ï¼Œæ‰€ä»¥ä»¥åçš„è¯·æ±‚ä¹Ÿè¦æäº¤ä¸€æ ·çš„å­—ç¬¦ä¸²</td></tr><tr><td align="center">Cookies</td><td align="left"><code>csrf_token</code>ï¼šåˆšåˆšå®¢æˆ·ç«¯ç”Ÿæˆçš„å­—ç¬¦ä¸²</td></tr></tbody></table><p>è‹¥è¯·æ±‚æˆåŠŸï¼Œä¼šè¿”å›ä¸ªäººçš„ä¿¡æ¯ï¼Œä¸‹å‘äº†2ä¸ªCookiesï¼Œä»¥åçš„è¯·æ±‚éƒ½è¦å¸¦ä¸Šï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯PHPSESSIDï¼Œä¸€ä¸ªæ˜¯cpiã€‚å…¶ä¸­cpiå¯ä»¥base64è§£ç ï¼šä¿¡æ¯ä¸º</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"Channel"</span>: <span class="string">"yiban"</span>,</span><br><span class="line">    <span class="attr">"Expire"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"Client"</span>: <span class="string">"c"</span>,</span><br><span class="line">    <span class="attr">"PersonId"</span>: <span class="string">"å‡è£…æ‰“ç "</span>,</span><br><span class="line">    <span class="attr">"UniversityName"</span>: <span class="string">"é•¿æ²™ç†å·¥å¤§å­¦"</span>,</span><br><span class="line">    <span class="attr">"City"</span>: <span class="string">"é•¿æ²™å¸‚"</span>,</span><br><span class="line">    <span class="attr">"PersonType"</span>: <span class="string">"student"</span>,</span><br><span class="line">    <span class="attr">"Grade"</span>: <span class="number">2017</span>,</span><br><span class="line">    <span class="attr">"Gender"</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">"EducationLevel"</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">"Timestamp"</span>: <span class="number">1581782834</span>,</span><br><span class="line">    <span class="attr">"Token"</span>: <span class="string">"å‡è£…æ‰“ç "</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¥½åƒä¹Ÿæ²¡å•¥ç”¨ï¼Œä¸»è¦æ˜¯æ˜¯PHPSESSIDè®°å½•äº†ä¼šè¯ä¿¡æ¯ã€‚</p><h2 id="5ã€æœªå®Œæˆæ‰“å¡æ¸…å•"><a href="#5ã€æœªå®Œæˆæ‰“å¡æ¸…å•" class="headerlink" title="5ã€æœªå®Œæˆæ‰“å¡æ¸…å•"></a>5ã€æœªå®Œæˆæ‰“å¡æ¸…å•</h2><table><thead><tr><th align="center">ç±»åˆ«</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">è·¯å¾„</td><td align="left"><a href="https://api.uyiban.com/officeTask/client/index/uncompletedList" target="_blank" rel="noopener">https://api.uyiban.com/officeTask/client/index/uncompletedList</a></td></tr><tr><td align="center">æ–¹å¼</td><td align="left">GET</td></tr><tr><td align="center">URLå‚æ•°</td><td align="left"><code>CSRF</code>ï¼šåˆšåˆšçš„éšæœºå­—ç¬¦ä¸²</td></tr><tr><td align="center">Cookies</td><td align="left"><code>csrf_token</code>ï¼šåˆšåˆšç”Ÿæˆçš„éšæœºå€¼ï¼›è¿˜æœ‰åˆšåˆšä¸‹å‘çš„2ä¸ªCookies</td></tr></tbody></table><p>è¿”å›å¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"code"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"msg"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="attr">"data"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"TaskId"</span>: <span class="string">"å‡è£…æ‰“ç "</span>,</span><br><span class="line">            <span class="attr">"OrgId"</span>: <span class="string">""</span>,</span><br><span class="line">            <span class="attr">"TimeoutState"</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="attr">"Title"</span>: <span class="string">"2æœˆ15æ—¥é•¿æ²™ç†å·¥å¤§å­¦å¥åº·æ‰“å¡æ‹Ÿç™»è®°è¡¨"</span>,</span><br><span class="line">            <span class="attr">"Type"</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="attr">"StartTime"</span>: <span class="number">1581696000</span>,</span><br><span class="line">            <span class="attr">"EndTime"</span>: <span class="number">1581782340</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­é‡è¦çš„æ˜¯<code>TaskId</code>ä»»åŠ¡Idç­‰ä¸‹è¦æäº¤çš„ã€‚å…¶ä»–çš„ä¸æ€ä¹ˆç”¨å¾—åˆ°ï¼Œ<code>TimeoutState</code>æ˜¯æ˜¯å¦è¶…æ—¶çš„ä¸€ä¸ªçŠ¶æ€ç ï¼Œ<code>Type</code>ä¸æ¸…æ¥šï¼Œæ­¤å¤–è¿˜æœ‰å¼€å§‹æ—¶é—´å’Œæˆªæ­¢æ—¶é—´ç­‰ä¿¡æ¯ã€‚</p><h2 id="6ã€ä»»åŠ¡è¯¦ç»†"><a href="#6ã€ä»»åŠ¡è¯¦ç»†" class="headerlink" title="6ã€ä»»åŠ¡è¯¦ç»†"></a>6ã€ä»»åŠ¡è¯¦ç»†</h2><table><thead><tr><th align="center">ç±»åˆ«</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">è·¯å¾„</td><td align="left"><a href="https://api.uyiban.com/officeTask/client/index/detail" target="_blank" rel="noopener">https://api.uyiban.com/officeTask/client/index/detail</a></td></tr><tr><td align="center">æ–¹å¼</td><td align="left">GET</td></tr><tr><td align="center">URLå‚æ•°</td><td align="left"><code>CSRF</code>ï¼šåˆšåˆšçš„éšæœºå­—ç¬¦ä¸²</td></tr><tr><td align="center">URLå‚æ•°</td><td align="left"><code>TaskId</code>ï¼šå…·ä½“æ‰“å¡ä»»åŠ¡çš„Id</td></tr><tr><td align="center">Cookies</td><td align="left"><code>csrf_token</code>ï¼šåˆšåˆšç”Ÿæˆçš„éšæœºå€¼ï¼›è¿˜æœ‰åˆšåˆšä¸‹å‘çš„2ä¸ªCookies</td></tr></tbody></table><p>è¿”å›å¦‚ä¸‹JSONï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"code"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"msg"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="attr">"data"</span>: &#123;</span><br><span class="line">        <span class="attr">"Id"</span>: <span class="string">"å‡è£…æ‰“ç "</span>,</span><br><span class="line">        <span class="attr">"Title"</span>: <span class="string">"2æœˆ15æ—¥é•¿æ²™ç†å·¥å¤§å­¦å¥åº·æ‰“å¡æ‹Ÿç™»è®°è¡¨"</span>,</span><br><span class="line">        <span class="attr">"Type"</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"TypeId"</span>: <span class="string">"2846c4086bc70b93ce3295800b764fb1"</span>,</span><br><span class="line">        <span class="attr">"PubOrgName"</span>: <span class="string">"å­¦ç”Ÿå·¥ä½œéƒ¨"</span>,</span><br><span class="line">        <span class="attr">"PubPersonName"</span>: <span class="string">"æ›¹å©·"</span>,</span><br><span class="line">        <span class="attr">"Content"</span>: <span class="string">"&lt;p&gt;è¯·åŒå­¦ä»¬è®¤çœŸå¡«å†™ï¼Œåœ¨ç–«æƒ…é¢å‰ï¼Œæ¯ä¸ªäººéƒ½èƒ½å¤Ÿå‡ºä¸€ä»½åŠ›ï¼&lt;/p&gt;"</span>,</span><br><span class="line">        <span class="attr">"AttachmentIds"</span>: <span class="string">""</span>,</span><br><span class="line">        <span class="attr">"PubOrgId"</span>: <span class="string">"0e70b45b68bfd3c42c9cfe7440721b31"</span>,</span><br><span class="line">        <span class="attr">"StartTime"</span>: <span class="number">1581696000</span>,</span><br><span class="line">        <span class="attr">"TimeState"</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"WFId"</span>: <span class="string">"d336f36226e932d152ed54cc2a1baf20"</span>,</span><br><span class="line">        <span class="attr">"AttachmentList"</span>: [],</span><br><span class="line">        <span class="attr">"WorkflowState"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"RetreatCount"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"InitiateId"</span>: <span class="string">""</span>,</span><br><span class="line">        <span class="attr">"RetreatReason"</span>: <span class="string">""</span>,</span><br><span class="line">        <span class="attr">"EvaluationState"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"EvaluationReason"</span>: <span class="string">""</span>,</span><br><span class="line">        <span class="attr">"State"</span>: <span class="string">"uncompleted"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­æœ€é‡è¦çš„æ˜¯<code>WFId</code>,ç»ç ”ç©¶ï¼Œè¿™ä¸ªæ˜¯å›ºå®šçš„è¡¨å•Idï¼Œä¹Ÿå°±æ˜¯è¯´åªè¦æˆ‘ä»¬è¦å¡«çš„è¡¨å•å†…å®¹ä¸å˜ï¼Œè¿™ä¸ªå€¼æ°¸è¿œä¸å˜ï¼Œç»å‘ç°ä»è¯•è¿è¡Œåˆ°ç°åœ¨ä¸€ç›´æ˜¯åŒä¸€ä»½è¡¨å•ã€‚è®°å½•ä¸‹å›ºå®šçš„<code>WFId</code>å°±å¥½ã€‚å…¶ä¸­çš„<code>Title</code>ã€<code>PubOrgName</code>å’Œ<code>PubPersonName</code>æäº¤æ‰“å¡è¡¨å•çš„æ—¶å€™è¦ç”¨åˆ°ã€‚</p><h2 id="7ã€è¡¨å•è¯¦ç»†ï¼ˆç¨‹åºä¸éœ€è®¿é—®ï¼‰"><a href="#7ã€è¡¨å•è¯¦ç»†ï¼ˆç¨‹åºä¸éœ€è®¿é—®ï¼‰" class="headerlink" title="7ã€è¡¨å•è¯¦ç»†ï¼ˆç¨‹åºä¸éœ€è®¿é—®ï¼‰"></a>7ã€è¡¨å•è¯¦ç»†ï¼ˆç¨‹åºä¸éœ€è®¿é—®ï¼‰</h2><table><thead><tr><th align="center">ç±»åˆ«</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">è·¯å¾„</td><td align="left"><a href="https://api.uyiban.com/workFlow/c/my/form/{WFId}" target="_blank" rel="noopener">https://api.uyiban.com/workFlow/c/my/form/{WFId}</a></td></tr><tr><td align="center">æ–¹å¼</td><td align="left">GET</td></tr><tr><td align="center">è·¯å¾„å ä½ç¬¦å‚æ•°</td><td align="left"><code>WFId</code>ï¼šå›ºå®šçš„ç–«æƒ…è¡¨å•Id</td></tr><tr><td align="center">URLå‚æ•°</td><td align="left"><code>CSRF</code>ï¼šåˆšåˆšçš„éšæœºå­—ç¬¦ä¸²</td></tr><tr><td align="center">Cookies</td><td align="left"><code>csrf_token</code>ï¼šåˆšåˆšç”Ÿæˆçš„éšæœºå€¼ï¼›è¿˜æœ‰åˆšåˆšä¸‹å‘çš„2ä¸ªCookies</td></tr></tbody></table><p>è¿™ä¸ªå¯¹ç¨‹åºæ¥è¯´æ›´ä¸é‡è¦äº†ï¼Œå°±æ˜¯è·å–è¡¨å•é‡Œé¢è¦å¡«çš„ä¸œè¥¿ã€‚å¯¹è¿”å›çš„ä¸œè¥¿è¿›è¡ŒäºŒæ¬¡è§£æåç»“æœæ˜¯ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">"component"</span>: <span class="string">"Input"</span>,</span><br><span class="line">        <span class="attr">"props"</span>: &#123;</span><br><span class="line">            <span class="attr">"label"</span>: <span class="string">"å§“å"</span>,</span><br><span class="line">            <span class="attr">"placeholder"</span>: <span class="string">"è¯·è¾“å…¥"</span>,</span><br><span class="line">            <span class="attr">"required"</span>: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"69d1ca628e017a2c182902bfabdabd42"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">"component"</span>: <span class="string">"Input"</span>,</span><br><span class="line">        <span class="attr">"props"</span>: &#123;</span><br><span class="line">            <span class="attr">"label"</span>: <span class="string">"ä¸“ä¸šç­çº§"</span>,</span><br><span class="line">            <span class="attr">"placeholder"</span>: <span class="string">"è¯·è¾“å…¥"</span>,</span><br><span class="line">            <span class="attr">"required"</span>: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"5680543d3631077265b049b7d9ae418e"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">"component"</span>: <span class="string">"GdMap"</span>,</span><br><span class="line">        <span class="attr">"props"</span>: &#123;</span><br><span class="line">            <span class="attr">"label"</span>: <span class="string">"å®¶åº­æ‰€åœ¨åœ°(åˆ°å¿)"</span>,</span><br><span class="line">            <span class="attr">"extra"</span>: <span class="string">"è¯·é€‰æ‹©"</span>,</span><br><span class="line">            <span class="attr">"required"</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">"params"</span>: &#123;</span><br><span class="line">                <span class="attr">"keywords"</span>: <span class="string">""</span>,</span><br><span class="line">                <span class="attr">"zoom"</span>: <span class="number">15</span>,</span><br><span class="line">                <span class="attr">"radius"</span>: <span class="number">1000</span>,</span><br><span class="line">                <span class="attr">"total"</span>: <span class="number">20</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"e62910f76e9d5ba63ddc84ae68606f0f"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">"component"</span>: <span class="string">"GdMap"</span>,</span><br><span class="line">        <span class="attr">"props"</span>: &#123;</span><br><span class="line">            <span class="attr">"label"</span>: <span class="string">"ç›®å‰æ‰€åœ¨åœ°(åˆ°å¿)"</span>,</span><br><span class="line">            <span class="attr">"extra"</span>: <span class="string">"è¯·é€‰æ‹©"</span>,</span><br><span class="line">            <span class="attr">"required"</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">"params"</span>: &#123;</span><br><span class="line">                <span class="attr">"keywords"</span>: <span class="string">""</span>,</span><br><span class="line">                <span class="attr">"zoom"</span>: <span class="number">15</span>,</span><br><span class="line">                <span class="attr">"radius"</span>: <span class="number">1000</span>,</span><br><span class="line">                <span class="attr">"total"</span>: <span class="number">20</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"ba7cabc21493b23bcfd65fa79525c4e0"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">"component"</span>: <span class="string">"Input"</span>,</span><br><span class="line">        <span class="attr">"props"</span>: &#123;</span><br><span class="line">            <span class="attr">"label"</span>: <span class="string">"å½“å‰ä½“æ¸©"</span>,</span><br><span class="line">            <span class="attr">"placeholder"</span>: <span class="string">"â„ƒ"</span>,</span><br><span class="line">            <span class="attr">"required"</span>: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"cf4bac544816ca83db09a7d8c4d69178"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//çœç•¥â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">"component"</span>: <span class="string">"Radio"</span>,</span><br><span class="line">        <span class="attr">"props"</span>: &#123;</span><br><span class="line">            <span class="attr">"label"</span>: <span class="string">"2å‘¨å†…æ˜¯å¦æ¥è§¦è¿‡ç¡®è¯Šç—…ä¾‹"</span>,</span><br><span class="line">            <span class="attr">"extra"</span>: <span class="string">"è¯·é€‰æ‹©"</span>,</span><br><span class="line">            <span class="attr">"options"</span>: [</span><br><span class="line">                <span class="string">"æ˜¯"</span>,</span><br><span class="line">                <span class="string">"å¦"</span>,</span><br><span class="line">                <span class="string">"æƒ…å†µä¸‹æ–¹è¡¥å……è¯´æ˜"</span></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">"required"</span>: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"a6288aa438a4e6e9264f029cc8dc5a5d"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">"component"</span>: <span class="string">"Textarea"</span>,</span><br><span class="line">        <span class="attr">"props"</span>: &#123;</span><br><span class="line">            <span class="attr">"label"</span>: <span class="string">"æ˜¯å¦æ¥è§¦è¿‡ç¡®è¯Šç—…ä¾‹è¡¥å……"</span>,</span><br><span class="line">            <span class="attr">"placeholder"</span>: <span class="string">"è¯·è¾“å…¥"</span>,</span><br><span class="line">            <span class="attr">"required"</span>: <span class="literal">false</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"a34eef03f5588c95241cb3bdf30e025c"</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>å…¶ä¸­<code>id</code>å°±æ˜¯å…·ä½“è¦å¡«å†™çš„å†…å®¹çš„<code>id</code>ï¼Œ<code>required</code>æ˜¯è¿™é¡¹æ˜¯å¦å¿…å¡«ã€‚</p><h2 id="8ã€-é‡ç‚¹-è¡¨å•æäº¤"><a href="#8ã€-é‡ç‚¹-è¡¨å•æäº¤" class="headerlink" title="8ã€[é‡ç‚¹]è¡¨å•æäº¤"></a>8ã€[é‡ç‚¹]è¡¨å•æäº¤</h2><table><thead><tr><th align="center">ç±»åˆ«</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">è·¯å¾„</td><td align="left"><a href="https://api.uyiban.com/workFlow/c/my/apply/{WFId}" target="_blank" rel="noopener">https://api.uyiban.com/workFlow/c/my/apply/{WFId}</a></td></tr><tr><td align="center">æ–¹å¼</td><td align="left">POST</td></tr><tr><td align="center">è·¯å¾„å ä½ç¬¦å‚æ•°</td><td align="left"><code>WFId</code>ï¼šå›ºå®šçš„ç–«æƒ…è¡¨å•Id</td></tr><tr><td align="center">URLå‚æ•°</td><td align="left"><code>CSRF</code>ï¼šåˆšåˆšçš„éšæœºå­—ç¬¦ä¸²</td></tr><tr><td align="center">URLå‚æ•°</td><td align="left"><code>TaskId</code>ï¼šå…·ä½“æ‰“å¡ä»»åŠ¡çš„Id</td></tr><tr><td align="center">Cookies</td><td align="left"><code>csrf_token</code>ï¼šåˆšåˆšç”Ÿæˆçš„éšæœºå€¼ï¼›è¿˜æœ‰åˆšåˆšä¸‹å‘çš„æ‰€æœ‰Cookies</td></tr></tbody></table><p>POST BODYæœ‰ä¸¤ä¸ªï¼š<br><code>data</code>ï¼šè¡¨å•å…·ä½“å†…å®¹ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"69d1ca628e017a2c182902bfabdabd42"</span>: <span class="string">"å§“å"</span>,</span><br><span class="line">    <span class="attr">"5680543d3631077265b049b7d9ae418e"</span>: <span class="string">"ç­çº§"</span>,</span><br><span class="line">    <span class="attr">"e62910f76e9d5ba63ddc84ae68606f0f"</span>: &#123;</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"åœ°å€å"</span>,</span><br><span class="line">        <span class="attr">"location"</span>: <span class="string">"ç»åº¦,çº¬åº¦"</span>,<span class="comment">//æ³¨ï¼šç²¾ç¡®åˆ°å°æ•°ç‚¹6ä½</span></span><br><span class="line">        <span class="attr">"address"</span>: <span class="string">"è¯¦ç»†åœ°å€"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"ba7cabc21493b23bcfd65fa79525c4e0"</span>: &#123;</span><br><span class="line">        <span class="attr">"name"</span>: <span class="string">"åœ°å€å"</span>,</span><br><span class="line">        <span class="attr">"location"</span>: <span class="string">"ç»åº¦,çº¬åº¦"</span>,<span class="comment">//æ³¨ï¼šç²¾ç¡®åˆ°å°æ•°ç‚¹6ä½</span></span><br><span class="line">        <span class="attr">"address"</span>: <span class="string">"è¯¦ç»†åœ°å€"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"cf4bac544816ca83db09a7d8c4d69178"</span>: <span class="string">"æ¸©åº¦"</span>,</span><br><span class="line">    <span class="attr">"f16558084d32bee1523e085c9be35c30"</span>: <span class="string">"æ— "</span>,</span><br><span class="line">    <span class="attr">"78bb535617d4caf28944bff53f434e32"</span>: <span class="string">"æ— "</span>,</span><br><span class="line">    <span class="attr">"43cfde1796a98708e3df57f8088460e4"</span>: <span class="string">"æ— "</span>,</span><br><span class="line">    <span class="attr">"8f472f4a665f93acf3de5c4ecab8c213"</span>: <span class="string">"æ— "</span>,</span><br><span class="line">    <span class="attr">"e8578087affe7bde28eb5b6ffa5149e1"</span>: <span class="string">"å¦"</span>,</span><br><span class="line">    <span class="attr">"24d085dd92e3a2bf43fef782e1fc7025"</span>: <span class="string">"å¦"</span>,</span><br><span class="line">    <span class="attr">"bd397e1b6437a9dc6129db60d82ffd02"</span>: <span class="string">"å¦"</span>,</span><br><span class="line">    <span class="attr">"d5adcefa1558c2759edd7c1cb41afbc4"</span>: <span class="string">"å¥åº·æè¿°"</span>,</span><br><span class="line">    <span class="attr">"484b372a88bb52cc0c54dcfbe618f779"</span>: <span class="string">"å®¶åº­å¥åº·æè¿°"</span>,</span><br><span class="line">    <span class="attr">"f0ac1554f16879b966c2135bcf3bdb53"</span>: <span class="string">"å¦"</span>,</span><br><span class="line">    <span class="attr">"7b771dd1f3512486fac560cfec00052b"</span>: <span class="string">"å¦"</span>,</span><br><span class="line">    <span class="attr">"a6288aa438a4e6e9264f029cc8dc5a5d"</span>: <span class="string">"å¦"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è‹¥ä½ è¦ä½¿ç”¨ï¼Œç›´æ¥ä¿®æ”¹ä¸Šæ–¹çš„ä¸€äº›æ•°æ®å³å¯ã€‚<br><code>extend</code>ï¼Œæ˜¯ä¼ ä¸€äº›è‡ªå®šä¹‰ä¿¡æ¯ï¼Œç»æ£€æµ‹ï¼Œåº”è¯¥æ˜¯å›ºå®šçš„ä¸‰ä¸ªä¿¡æ¯ï¼šä»»åŠ¡åç§°ã€å‘å¸ƒæœºæ„ã€å‘å¸ƒäººã€‚è¿™ä¸‰ä¸ªä¿¡æ¯å¯ä»¥åœ¨ç¬¬4ä¸ªåŒ…é‡Œæ‰¾åˆ°ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"TaskId"</span>: <span class="string">"å‡è£…æ‰“ç "</span>,</span><br><span class="line">    <span class="attr">"title"</span>: <span class="string">"ä»»åŠ¡ä¿¡æ¯"</span>,</span><br><span class="line">    <span class="attr">"content"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"label"</span>: <span class="string">"ä»»åŠ¡åç§°"</span>,</span><br><span class="line">            <span class="attr">"value"</span>: <span class="string">"3æœˆ25æ—¥é•¿æ²™ç†å·¥å¤§å­¦å¥åº·æ‰“å¡ç™»è®°è¡¨"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"label"</span>: <span class="string">"å‘å¸ƒæœºæ„"</span>,</span><br><span class="line">            <span class="attr">"value"</span>: <span class="string">"å­¦ç”Ÿå·¥ä½œéƒ¨"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"label"</span>: <span class="string">"å‘å¸ƒäºº"</span>,</span><br><span class="line">            <span class="attr">"value"</span>: <span class="string">"é•¿æ²™ç†å·¥å¤§å­¦"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­£ç¡®çš„è¯ï¼Œè¯·æ±‚è¿”å›çš„codeæ˜¯æ•´æ•°0ï¼Œå¹¶ä¸”ä¼šè¿”å›<code>initiateId</code>ç”¨äºè½¬å‘è¡¨å•ã€‚</p><h2 id="9ã€è·å–è½¬å‘è¡¨å•URL"><a href="#9ã€è·å–è½¬å‘è¡¨å•URL" class="headerlink" title="9ã€è·å–è½¬å‘è¡¨å•URL"></a>9ã€è·å–è½¬å‘è¡¨å•URL</h2><table><thead><tr><th align="center">ç±»åˆ«</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">è·¯å¾„</td><td align="left"><a href="https://api.uyiban.com/workFlow/c/work/share?InitiateId=%s&amp;CSRF=%s" target="_blank" rel="noopener">https://api.uyiban.com/workFlow/c/work/share?InitiateId=%s&amp;CSRF=%s</a></td></tr><tr><td align="center">æ–¹å¼</td><td align="left">GET</td></tr><tr><td align="center">URLå‚æ•°</td><td align="left"><code>CSRF</code>ï¼šåˆšåˆšçš„éšæœºå­—ç¬¦ä¸²</td></tr><tr><td align="center">URLå‚æ•°</td><td align="left"><code>InitiateId</code>ï¼šåˆšåˆšæ‰“å¡è¿”å›çš„</td></tr><tr><td align="center">Cookies</td><td align="left"><code>csrf_token</code>ï¼šåˆšåˆšç”Ÿæˆçš„éšæœºå€¼ï¼›è¿˜æœ‰åˆšåˆšä¸‹å‘çš„æ‰€æœ‰Cookies</td></tr></tbody></table><p>å¯ä»¥å¾—åˆ°äººäººå¯ä»¥è®¿é—®çš„è¡¨å•æµè§ˆURL</p><h1 id="ğŸ˜æºç "><a href="#ğŸ˜æºç " class="headerlink" title="ğŸ˜æºç "></a>ğŸ˜æºç </h1><p>20201117æ›´æ–°ï¼Œè¯·æ‰“å¼€<a href="https://github.com/looyeagee/yiban_auto_submit" target="_blank" rel="noopener">https://github.com/looyeagee/yiban_auto_submit</a> æŸ¥çœ‹è¯¦æƒ…</p><h2 id="main-py"><a href="#main-py" class="headerlink" title="main.py"></a>main.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> traceback</span><br><span class="line"><span class="keyword">from</span> yiban <span class="keyword">import</span> YiBan</span><br><span class="line"><span class="keyword">import</span> util</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        yb = YiBan(<span class="string">"phone"</span>, <span class="string">"password"</span>) <span class="comment"># <span class="doctag">FIXME:</span>è´¦å·å¯†ç </span></span><br><span class="line">        yb.login()</span><br><span class="line">        yb.getHome()</span><br><span class="line">        print(<span class="string">"ç™»å½•æˆåŠŸ %s"</span>%yb.name)</span><br><span class="line">        yb.auth()</span><br><span class="line">        all_task = yb.getUncompletedList()[<span class="string">"data"</span>]</span><br><span class="line">        all_task = list(filter(<span class="keyword">lambda</span> x: <span class="string">"ä½“æ¸©æ£€æµ‹"</span> <span class="keyword">in</span> x[<span class="string">"Title"</span>], all_task))  <span class="comment"># <span class="doctag">FIXME:</span> é•¿ç†çš„æ‰“å¡ä»»åŠ¡æ ‡é¢˜å‡å«æœ‰"ä½“æ¸©æ£€æµ‹"å­—æ · æ­¤ä¸¾æ˜¯é˜²æ­¢å…¶ä»–è¡¨å•å¹²æ‰° ï¼ˆå¯èƒ½ä¼šå˜ï¼‰</span></span><br><span class="line">        <span class="keyword">if</span> len(all_task) == <span class="number">0</span>:</span><br><span class="line">            print(<span class="string">"æ²¡æ‰¾åˆ°ä»Šå¤©é•¿ç†ä½“æ¸©ä¸ŠæŠ¥çš„ä»»åŠ¡ï¼Œå¯èƒ½æ˜¯ä½ å·²ç»ä¸ŠæŠ¥ï¼Œå¦‚æœä¸æ˜¯è¯·æ‰‹åŠ¨ä¸ŠæŠ¥ã€‚"</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            all_task_sort = util.desc_sort(all_task, <span class="string">"StartTime"</span>)  <span class="comment"># æŒ‰å¼€å§‹æ—¶é—´æ’åº</span></span><br><span class="line">            new_task = all_task_sort[<span class="number">0</span>]  <span class="comment"># åªå–ä¸€ä¸ªæœ€æ–°çš„</span></span><br><span class="line">            print(<span class="string">"æ‰¾åˆ°æœªä¸ŠæŠ¥çš„ä»»åŠ¡ï¼š"</span>, new_task)</span><br><span class="line">            task_detail = yb.getTaskDetail(new_task[<span class="string">"TaskId"</span>])[<span class="string">"data"</span>]</span><br><span class="line">            ex = &#123;<span class="string">"TaskId"</span>: task_detail[<span class="string">"Id"</span>],</span><br><span class="line">                <span class="string">"title"</span>: <span class="string">"ä»»åŠ¡ä¿¡æ¯"</span>,</span><br><span class="line">                <span class="string">"content"</span>: [&#123;<span class="string">"label"</span>: <span class="string">"ä»»åŠ¡åç§°"</span>, <span class="string">"value"</span>: task_detail[<span class="string">"Title"</span>]&#125;,</span><br><span class="line">                            &#123;<span class="string">"label"</span>: <span class="string">"å‘å¸ƒæœºæ„"</span>, <span class="string">"value"</span>: task_detail[<span class="string">"PubOrgName"</span>]&#125;,</span><br><span class="line">                            &#123;<span class="string">"label"</span>: <span class="string">"å‘å¸ƒäºº"</span>, <span class="string">"value"</span>: task_detail[<span class="string">"PubPersonName"</span>]&#125;]&#125;</span><br><span class="line">            <span class="comment"># <span class="doctag">FIXME:</span> ä»¥ä¸‹æ˜¯é•¿æ²™ç†å·¥å¤§å­¦æœ€æ–°çš„è¡¨å•ä¿¡æ¯ï¼Œç”±äºæŸäº›å€¼ï¼ˆæ£€æµ‹æ—¶é—´ï¼‰å¿…é¡»æ˜¯åŠ¨æ€çš„ï¼Œæ‰€ä»¥åªèƒ½å°†formè¡¨å•å†™æ­»åœ¨è¿™é‡Œ ï¼ˆå¯èƒ½ä¼šå˜ï¼‰</span></span><br><span class="line">            dict_form = &#123;<span class="string">"2fca911d0600717cc5c2f57fc3702787"</span>: [<span class="string">"æ¹–å—çœ"</span>, <span class="string">"é•¿æ²™å¸‚"</span>, <span class="string">"å¤©å¿ƒåŒº"</span>],</span><br><span class="line">                        <span class="string">"cab886bf693f23a34ed78ed71deaadc3"</span>: yb.name,</span><br><span class="line">                        <span class="string">"b418fa886b6a38bdce72569a70b1fa10"</span>: [<span class="string">"36.2"</span>, <span class="string">"36.3"</span>, <span class="string">"36.4"</span>, <span class="string">"36.5"</span>, <span class="string">"36.6"</span>, <span class="string">"36.7"</span>, <span class="string">"36.8"</span>][random.randint(<span class="number">0</span>, <span class="number">6</span>)], <span class="comment"># éšæœºä½“æ¸©</span></span><br><span class="line">                        <span class="string">"c77d35b16fb22ec70a1f33c315141dbb"</span>: util.get_time_no_second()&#125;</span><br><span class="line">            submit_result = yb.submit(json.dumps(dict_form, ensure_ascii=<span class="literal">False</span>), json.dumps(</span><br><span class="line">                ex, ensure_ascii=<span class="literal">False</span>), task_detail[<span class="string">"WFId"</span>])</span><br><span class="line">            <span class="keyword">if</span> submit_result[<span class="string">"code"</span>] == <span class="number">0</span>:</span><br><span class="line">                share_url = yb.getShareUrl(submit_result[<span class="string">"data"</span>])[<span class="string">"data"</span>][<span class="string">"uri"</span>]</span><br><span class="line">                print(<span class="string">"å·²å®Œæˆä¸€æ¬¡ä½“æ¸©ä¸ŠæŠ¥[%s]"</span> % task_detail[<span class="string">"Title"</span>])</span><br><span class="line">                print(<span class="string">"è®¿é—®æ­¤ç½‘å€æŸ¥çœ‹è¯¦æƒ…ï¼š%s"</span> % share_url)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                print(<span class="string">"[%s]é‡åˆ°äº†ä¸€äº›é”™è¯¯:%s"</span> % (task_detail[<span class="string">"Title"</span>], submit_result[<span class="string">"msg"</span>]))</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        print(<span class="string">"å‡ºé”™å•¦"</span>)</span><br><span class="line">        print(e)</span><br></pre></td></tr></table></figure><h2 id="yiban-py"><a href="#yiban-py" class="headerlink" title="yiban.py"></a>yiban.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> util</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">YiBan</span>:</span></span><br><span class="line">    CSRF = <span class="string">"sui-bian-fang-dian-dong-xi"</span>  <span class="comment"># éšæœºå€¼ éšä¾¿å¡«ç‚¹ä¸œè¥¿</span></span><br><span class="line">    COOKIES = &#123;<span class="string">"csrf_token"</span>: CSRF&#125;  <span class="comment"># å›ºå®šcookie æ— éœ€æ›´æ”¹</span></span><br><span class="line">    HEADERS = &#123;<span class="string">"Origin"</span>: <span class="string">"https://c.uyiban.com"</span>, <span class="string">"User-Agent"</span>: <span class="string">"yiban"</span>&#125;  <span class="comment"># å›ºå®šå¤´ æ— éœ€æ›´æ”¹</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, account, passwd)</span>:</span></span><br><span class="line">        self.account = account</span><br><span class="line">        self.passwd = passwd</span><br><span class="line">        self.session = requests.session()</span><br><span class="line">        self.name = <span class="string">""</span></span><br><span class="line">        self.iapp = <span class="string">""</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">request</span><span class="params">(self, url, method=<span class="string">"get"</span>, params=None, cookies=None)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> method == <span class="string">"get"</span>:</span><br><span class="line">            req = self.session.get(url, params=params, timeout=<span class="number">10</span>, headers=self.HEADERS, cookies=cookies)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            req = self.session.post(url, data=params, timeout=<span class="number">10</span>, headers=self.HEADERS, cookies=cookies)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">return</span> req.json()</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">login</span><span class="params">(self)</span>:</span></span><br><span class="line">        params = &#123;</span><br><span class="line">            <span class="string">"mobile"</span>: self.account,</span><br><span class="line">            <span class="string">"imei"</span>: <span class="string">"0"</span>,</span><br><span class="line">            <span class="string">"password"</span>: self.passwd</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment"># æœ€æ–°ä¸éœ€è¦åŠ å¯†å¯†ç ç›´æ¥ç™»å½•çš„æ¥å£æ¥è‡ªæˆ‘Bç«™è§†é¢‘è¯„è®ºç”¨æˆ·ï¼šç ´æŸçš„é˜ç¿…(bilibili_id:45807603)</span></span><br><span class="line">        r = self.request(url=<span class="string">"https://mobile.yiban.cn/api/v3/passport/login"</span>, params=params)</span><br><span class="line">        <span class="keyword">if</span> r <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">and</span> str(r[<span class="string">"response"</span>]) == <span class="string">"100"</span>:</span><br><span class="line">            self.access_token = r[<span class="string">"data"</span>][<span class="string">"user"</span>][<span class="string">"access_token"</span>]</span><br><span class="line">            <span class="keyword">return</span> r</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> Exception(<span class="string">"è´¦å·æˆ–å¯†ç é”™è¯¯"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getHome</span><span class="params">(self)</span>:</span></span><br><span class="line">        params = &#123;</span><br><span class="line">            <span class="string">"access_token"</span>: self.access_token,</span><br><span class="line">        &#125;</span><br><span class="line">        r = self.request(url=<span class="string">"https://mobile.yiban.cn/api/v3/home"</span>, params=params)</span><br><span class="line">        self.name = r[<span class="string">"data"</span>][<span class="string">"user"</span>][<span class="string">"userName"</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> r[<span class="string">"data"</span>][<span class="string">"hotApps"</span>]: <span class="comment"># åŠ¨æ€å–å¾—iappå· 20201117æ›´æ–°</span></span><br><span class="line">            <span class="keyword">if</span> i[<span class="string">"name"</span>] == <span class="string">"æ˜“ç­æ ¡æœ¬åŒ–"</span>:</span><br><span class="line">                self.iapp = re.findall(<span class="string">r"(iapp.*)\?"</span>, i[<span class="string">"url"</span>])[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">return</span> r</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">auth</span><span class="params">(self)</span>:</span></span><br><span class="line">        params = &#123;</span><br><span class="line">            <span class="string">"act"</span>: self.iapp,</span><br><span class="line">            <span class="string">"v"</span>: self.access_token</span><br><span class="line">        &#125;</span><br><span class="line">        print()</span><br><span class="line">        location = self.session.get(<span class="string">"http://f.yiban.cn/iapp/index"</span>,params=params,</span><br><span class="line">                                    allow_redirects=<span class="literal">False</span>).headers.get(<span class="string">"Location"</span>)</span><br><span class="line">        <span class="keyword">if</span> location <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">raise</span> Exception(<span class="string">"è¯¥ç”¨æˆ·å¯èƒ½æ²¡è¿›è¡Œæ ¡æ–¹è®¤è¯ï¼Œæ— æ­¤APPæƒé™"</span>)</span><br><span class="line">        verifyRequest = re.findall(<span class="string">r"verify_request=(.*?)&amp;"</span>, location)[<span class="number">0</span>]</span><br><span class="line">        result_auth = self.request(</span><br><span class="line">            <span class="string">"https://api.uyiban.com/base/c/auth/yiban?verifyRequest=%s&amp;CSRF=%s"</span> % (verifyRequest, self.CSRF),</span><br><span class="line">            cookies=self.COOKIES)</span><br><span class="line">        data_url = result_auth[<span class="string">"data"</span>].get(<span class="string">"Data"</span>)</span><br><span class="line">        <span class="keyword">if</span> data_url <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:  <span class="comment"># æˆæƒè¿‡æœŸ</span></span><br><span class="line">            result_html = self.session.get(url=data_url, headers=self.HEADERS,</span><br><span class="line">                                           cookies=&#123;<span class="string">"loginToken"</span>: self.access_token&#125;).text</span><br><span class="line">            re_result = re.findall(<span class="string">r'input type="hidden" id="(.*?)" value="(.*?)"'</span>, result_html)</span><br><span class="line">            post_data = &#123;<span class="string">"scope"</span>: <span class="string">"1,2,3,"</span>&#125;</span><br><span class="line">            <span class="keyword">for</span> re_i <span class="keyword">in</span> re_result:</span><br><span class="line">                post_data[re_i[<span class="number">0</span>]] = re_i[<span class="number">1</span>]</span><br><span class="line">            usersure_result = self.session.post(url=<span class="string">"https://oauth.yiban.cn/code/usersure"</span>,</span><br><span class="line">                                                data=post_data,</span><br><span class="line">                                                headers=self.HEADERS, cookies=&#123;<span class="string">"loginToken"</span>: self.access_token&#125;)</span><br><span class="line">            <span class="keyword">if</span> usersure_result.json()[<span class="string">"code"</span>] == <span class="string">"s200"</span>:</span><br><span class="line">                <span class="keyword">return</span> self.auth()</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getUncompletedList</span><span class="params">(self)</span>:</span></span><br><span class="line">        params = &#123;</span><br><span class="line">            <span class="string">"CSRF"</span>: self.CSRF,</span><br><span class="line">            <span class="string">"StartTime"</span>: util.get_today(),</span><br><span class="line">            <span class="string">"EndTime"</span>: util.get_time()</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">"https://api.uyiban.com/officeTask/client/index/uncompletedList"</span>, params=params,</span><br><span class="line">                            cookies=self.COOKIES)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getCompletedList</span><span class="params">(self)</span>:</span></span><br><span class="line">        params = &#123;</span><br><span class="line">            <span class="string">"CSRF"</span>: self.CSRF,</span><br><span class="line">            <span class="string">"StartTime"</span>: util.get_7_day_ago(),</span><br><span class="line">            <span class="string">"EndTime"</span>: util.get_time()</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">"https://api.uyiban.com/officeTask/client/index/completedList"</span>, params=params,</span><br><span class="line">                            cookies=self.COOKIES)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getJsonByInitiateId</span><span class="params">(self, initiate_id)</span>:</span></span><br><span class="line">        params = &#123;</span><br><span class="line">            <span class="string">"CSRF"</span>: self.CSRF</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> self.request(<span class="string">"https://api.uyiban.com/workFlow/c/work/show/view/%s"</span> % initiate_id, params=params,</span><br><span class="line">                            cookies=self.COOKIES)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getTaskDetail</span><span class="params">(self, taskId)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.request(</span><br><span class="line">            <span class="string">"https://api.uyiban.com/officeTask/client/index/detail?TaskId=%s&amp;CSRF=%s"</span> % (taskId, self.CSRF),</span><br><span class="line">            cookies=self.COOKIES)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">submit</span><span class="params">(self, data, extend, wfid)</span>:</span></span><br><span class="line">        params = &#123;</span><br><span class="line">            <span class="string">"data"</span>: data,</span><br><span class="line">            <span class="string">"extend"</span>: extend</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> self.request(</span><br><span class="line">            <span class="string">"https://api.uyiban.com/workFlow/c/my/apply/%s?CSRF=%s"</span> % (wfid, self.CSRF), method=<span class="string">"post"</span>,</span><br><span class="line">            params=params,</span><br><span class="line">            cookies=self.COOKIES)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getShareUrl</span><span class="params">(self, initiateId)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.request(</span><br><span class="line">            <span class="string">"https://api.uyiban.com/workFlow/c/work/share?InitiateId=%s&amp;CSRF=%s"</span> % (initiateId, self.CSRF),</span><br><span class="line">            cookies=self.COOKIES)</span><br></pre></td></tr></table></figure><h1 id="ğŸ˜‡å¦‚ä½•è‡ªåŠ¨ï¼Ÿ"><a href="#ğŸ˜‡å¦‚ä½•è‡ªåŠ¨ï¼Ÿ" class="headerlink" title="ğŸ˜‡å¦‚ä½•è‡ªåŠ¨ï¼Ÿ"></a>ğŸ˜‡å¦‚ä½•è‡ªåŠ¨ï¼Ÿ</h1><p>ä¹°ä¸ªæœåŠ¡å™¨ï¼Œä½¿ç”¨Linuxçš„crontabå°±å¥½å•¦ï¼ŒåŠ ä¸Šå¦‚ä¸‹è§„åˆ™ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 0 * * * python3 &#x2F;root&#x2F;yiban&#x2F;main.py</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±ä¼šæ¯å¤©çš„0ç‚¹1åˆ†è¿è¡Œè¿™ä¸ªè„šæœ¬å•¦ã€‚æ¯å¤©çœ‹çœ‹ç»“æœå°±è¡Œäº†ï¼Œè¿˜æƒ³æŠ˜è…¾çš„ï¼Œå¯ä»¥æä¸ªè‡ªåŠ¨å‘é‚®ä»¶é€šçŸ¥è‡ªå·±å³å¯ã€‚</p><p>è¿è¡Œæˆªå›¾(è€ç‰ˆæœ¬ç•™ä¸ªçºªå¿µ)<br><img src="https://cdn.looyeagee.cn/blog/img/2020/02/3012391506.png-blog" alt="å›¾1:æ‰“å¡è¿è¡Œæˆªå›¾"></p></div><section class="post-copyright"><p class="copyright-item"><span>æ–‡ç« ä½œè€…:</span> <span>LooyeaGee</span></p><p class="copyright-item"><span>æ–‡ç« é“¾æ¥:</span> <span><a href="https://looyeagee.cn/software/yiban/">https://looyeagee.cn/software/yiban/</a></span></p><p class="copyright-item"><span>ç‰ˆæƒå£°æ˜:</span> <span>æœ¬åšå®¢é‡‡ç”¨<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a>è¿›è¡Œè®¸å¯</span></p></section><section class="post-tags"><div><span>æ ‡ç­¾:</span> <span class="tag"><a href="/tags/%E6%98%93%E7%8F%AD/"># æ˜“ç­</a> <a href="/tags/%E8%87%AA%E5%8A%A8%E5%8C%96/"># è‡ªåŠ¨åŒ–</a></span></div><div><a href="javascript:window.history.back();">è¿”å›</a> <span>&nbsp;&nbsp; /&nbsp;&nbsp; </span><a href="/archives/">é¦–é¡µ</a></div></section><section class="post-nav"><a class="prev" rel="prev" href="/software/class_schedule/">[å¼€æº]è‡ªåŠ¨è·å–å½“å¤©è¯¾è¡¨å¹¶å‘é€è‡³é‚®ç®±</a> <a class="next" rel="next" href="/notes/MP/">Mybatis Pluså¸¦å¤šæ¡ä»¶çš„å¤šè¡¨è”åˆã€åˆ†é¡µã€æ’åºæŸ¥è¯¢</a></section><br><br><section id="comments" class="comments"><style>.comments{margin:30px;padding:10px;background:#fff}@media screen and (max-width:800px){.comments{margin:auto;padding:10px;background:#fff}}</style><div class="valine_comment"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>new Valine({el:".valine_comment",app_id:"GGS59T6lHdF3dH3fhiSJwu4G-MdYXbMMI",app_key:"mqefY3TJMDaBRqc44I7OdYtY",placeholder:"è¯´ç‚¹ä»€ä¹ˆå‘—",notify:"false",verify:"false",avatar:"monsterid",visitor:!0})</script></section></article></div></div><footer id="footer" class="footer">è®¿é—®æ€»é‡ï¼š<span id="pv">åŠ è½½ä¸­...</span><br><a href="http://beian.miit.gov.cn" target="__blank">æ¹˜ICPå¤‡19026259å·-1</a> â€¢ <a target="_blank" style="line-height:18px" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=43018102000289"><img src="https://cdn.looyeagee.cn/blog/img/wangan.png" data-nobox="true" style="width:16px;height:16px;vertical-align:sub">æ¹˜å…¬ç½‘å®‰å¤‡43018102000289å·</a><br>Copyright &copy; 2020 <a href="https://looyeagee.cn/">äº¦ä¹‹æ—¥è®°</a> çš„åšå®¢ â€¢ Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></footer><script>const path_name=decodeURI(window.location.pathname);$.ajax({type:"POST",url:"https://api.looyeagee.cn/api/visit"+path_name,success:function(t){$("#article_pv").html(t.hits),$("#pv").html(t.all)},error:function(t){}})</script></div></body></html>